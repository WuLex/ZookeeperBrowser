@{
    Layout = null;
    ViewBag.Title = "Manager";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Page</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/layui/2.6.8/css/layui.min.css">
</head>
<body>
    <div class="layui-container">
        <h2>监控信息</h2>
        <table id="monitorTable"></table>

        <h2>配置信息</h2>
        <table id="configurationTable"></table>

        <h2>服务器状态</h2>
        <table id="serverStatsTable"></table>

        <h2>统计信息</h2>
        <table id="statsTable"></table>
    </div>

    <script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/layui/2.6.8/layui.min.js"></script>
    <script>
        layui.use(['table'], function () {
            var table = layui.table;
            var $ = layui.jquery;

            // 请求monitor数据
            $.ajax({
                type: 'GET',
                url: '/Commands/monitor',
                dataType: 'json',
                success: function (data) {
                    // 渲染表格
                    table.render({
                        elem: '#monitorTable',
                        cols: [[
                            { field: 'requestCount', title: '请求次数', sort: true },
                            { field: 'averageLatency', title: '平均延迟', sort: true },
                            { field: 'minLatency', title: '最小延迟', sort: true },
                            { field: 'maxLatency', title: '最大延迟', sort: true },
                            { field: 'receivedBytes', title: '接收字节数', sort: true },
                            { field: 'sentBytes', title: '发送字节数', sort: true }
                        ]],
                        data: [data],
                        page: false
                    });
                }
            });

            // 请求configuration数据
            $.ajax({
                type: 'GET',
                url: '/Commands/configuration',
                dataType: 'json',
                success: function (data) {
                    // 渲染表格
                    table.render({
                        elem: '#configurationTable',
                        cols: [[
                            { field: 'version', title: '版本号' },
                            { field: 'buildDate', title: '构建日期' },
                            { field: 'gitHash', title: 'Git哈希值' }
                        ]],
                        data: [data],
                        page: false
                    });
                }
            });

            // 请求serverStats数据
            //$.ajax({
            //    type: 'GET',
            //    url: 'http://localhost:8080/commands/server_stats',
            //    dataType: 'json',
            //    success: function (data) {
            //        // 渲染表格
            //        table.render({
            //            elem: '#serverStatsTable',
            //            cols: [[
            //                { field: 'connections', title: '连接数', sort: true },
            //                { field: 'outstandingRequests', title: '未完成请求数',sort: true },
            // 请求serverStats数据
            $.ajax({
                type: 'GET',
                url: 'http://localhost:8080/commands/server_stats',
                dataType: 'json',
                success: function (data) {
                    // 渲染表格
                    table.render({
                        elem: '#serverStatsTable',
                        cols: [[
                            { field: 'connections', title: '连接数', sort: true },
                            { field: 'outstandingRequests', title: '未完成请求数', sort: true }
                        ]],
                        data: [data],
                        page: false
                    });
                }
            });
          
            // 请求stats数据
            $.ajax({
                type: 'GET',
                url: 'http://localhost:8080/commands/stats',
                dataType: 'json',
                success: function (data) {
                    // 渲染表格
                    table.render({
                        elem: '#statsTable',
                        cols: [[
                            { field: 'nodeCount', title: '节点数', sort: true },
                            {field: 'watchCount', title: '监视数', sort: trueS },
                            { field: 'ephemeralsCount', title: '临时节点数', sort: true }
                        ]],
                        data: [data],
                        page: false
                    });
                }
            });
        });
      </script>
</body>
</html>